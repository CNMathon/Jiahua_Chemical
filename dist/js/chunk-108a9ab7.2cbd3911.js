(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-108a9ab7"],{1276:function(e,t,n){"use strict";var a=n("d784"),i=n("44e7"),s=n("825a"),o=n("1d80"),r=n("4840"),l=n("8aa5"),c=n("50c4"),u=n("14c3"),d=n("9263"),h=n("d039"),p=[].push,f=Math.min,w=4294967295,k=!h((function(){return!RegExp(w,"y")}));a("split",2,(function(e,t,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var a=String(o(this)),s=void 0===n?w:n>>>0;if(0===s)return[];if(void 0===e)return[a];if(!i(e))return t.call(a,e,s);var r,l,c,u=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,k=new RegExp(e.source,h+"g");while(r=d.call(k,a)){if(l=k.lastIndex,l>f&&(u.push(a.slice(f,r.index)),r.length>1&&r.index<a.length&&p.apply(u,r.slice(1)),c=r[0].length,f=l,u.length>=s))break;k.lastIndex===r.index&&k.lastIndex++}return f===a.length?!c&&k.test("")||u.push(""):u.push(a.slice(f)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=o(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,i,n):a.call(String(i),t,n)},function(e,i){var o=n(a,e,this,i,a!==t);if(o.done)return o.value;var d=s(e),h=String(this),p=r(d,RegExp),v=d.unicode,g=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(k?"y":"g"),m=new p(k?d:"^(?:"+d.source+")",g),D=void 0===i?w:i>>>0;if(0===D)return[];if(0===h.length)return null===u(m,h)?[h]:[];var b=0,C=0,x=[];while(C<h.length){m.lastIndex=k?C:0;var R,y=u(m,k?h:h.slice(C));if(null===y||(R=f(c(m.lastIndex+(k?0:C)),h.length))===b)C=l(h,C,v);else{if(x.push(h.slice(b,C)),x.length===D)return x;for(var $=1;$<=y.length-1;$++)if(x.push(y[$]),x.length===D)return x;C=b=R}}return x.push(h.slice(b)),x}]}),!k)},"17c2":function(e,t,n){"use strict";var a=n("b727").forEach,i=n("b301");e.exports=i("forEach")?function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1ad8":function(e,t,n){"use strict";var a=n("4083"),i=n.n(a);i.a},4083:function(e,t,n){},4160:function(e,t,n){"use strict";var a=n("23e7"),i=n("17c2");a({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"44e7":function(e,t,n){var a=n("861d"),i=n("c6b6"),s=n("b622"),o=s("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},e30a:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mangban"},[n("van-sticky",[n("van-nav-bar",{attrs:{title:"临时用电","left-text":"返回","right-text":"操作","left-arrow":""},on:{"click-left":e.pageBack,"click-right":e.openAction}})],1),n("div",{staticClass:"cell_group"},[n("cell-value",{attrs:{title:"申请部门",value:e.$userInfo.officeName,disable:""}}),n("cell-value",{attrs:{title:"申请人",value:e.$userInfo.userName,disable:""}}),n("cell-value",{attrs:{title:"作业票编号",value:"",disable:""}}),n("cell-value",{attrs:{title:"作业票状态",value:"编辑",disable:""}}),n("cell-textarea",{attrs:{title:"作业内容",required:"",placeholder:"请输入作业内容"},model:{value:e.sendData.workContent,callback:function(t){e.$set(e.sendData,"workContent",t)},expression:"sendData.workContent"}}),n("cell-input",{attrs:{title:"作业地点",required:"",placeholder:"请输作业地点"},model:{value:e.sendData.workLocation,callback:function(t){e.$set(e.sendData,"workLocation",t)},expression:"sendData.workLocation"}}),n("cell-picker",{attrs:{title:"用电方式",required:"",columns:e.powerTypeColumns},model:{value:e.sendData.powerType,callback:function(t){e.$set(e.sendData,"powerType",t)},expression:"sendData.powerType"}}),n("cell-picker",{attrs:{title:"工作电压",required:"",columns:e.jworkVoltageColumns},model:{value:e.sendData.jworkVoltage,callback:function(t){e.$set(e.sendData,"jworkVoltage",t)},expression:"sendData.jworkVoltage"}}),n("cell-picker",{attrs:{title:"公共区域",required:"",columns:e.publicAreaColumns},model:{value:e.sendData.publicArea,callback:function(t){e.$set(e.sendData,"publicArea",t)},expression:"sendData.publicArea"}}),n("cell-input",{attrs:{title:"用电设备及功率",required:"",placeholder:"手工录入"},model:{value:e.sendData.devicePower,callback:function(t){e.$set(e.sendData,"devicePower",t)},expression:"sendData.devicePower"}}),n("cell-select-tag",{attrs:{required:"",title:"危害辨识",storeKey:"hazardIdentification",tagList:e.hazardIdentification,showList:e.list_1,storeModule:e.storeModule}}),n("cell-time",{attrs:{title:"用电开始时间",required:""},model:{value:e.sendData.powertimeStart,callback:function(t){e.$set(e.sendData,"powertimeStart",t)},expression:"sendData.powertimeStart"}}),n("cell-time",{attrs:{title:"用电结束时间",required:""},model:{value:e.sendData.powertimeEnd,callback:function(t){e.$set(e.sendData,"powertimeEnd",t)},expression:"sendData.powertimeEnd"}}),n("cell-select-user",{attrs:{title:"接线人",required:"",storeModule:e.storeModule,storeKey:"connectRen"},model:{value:e.sendData.connectRen,callback:function(t){e.$set(e.sendData,"connectRen",t)},expression:"sendData.connectRen"}}),n("div",{staticClass:"cell"},[e._m(0),n("div",{staticClass:"cell_value"},[n("span",[e._v("人名")]),n("span",{staticClass:"cell_value_arrow"},[n("van-icon",{attrs:{name:"search"}})],1)])]),n("cell-select-user",{attrs:{title:"施工现场负责人",required:"",storeModule:e.storeModule,storeKey:"workCharger"},model:{value:e.sendData.workCharger,callback:function(t){e.$set(e.sendData,"workCharger",t)},expression:"sendData.workCharger"}}),n("cell-select-user",{attrs:{title:"作业人",required:"",storeModule:e.storeModule,storeKey:"workRen"},model:{value:e.sendData.workRen,callback:function(t){e.$set(e.sendData,"workRen",t)},expression:"sendData.workRen"}}),n("cell-input",{attrs:{title:"电工证号",required:"",placeholder:"手工录入"},model:{value:e.sendData.licenseCode,callback:function(t){e.$set(e.sendData,"licenseCode",t)},expression:"sendData.licenseCode"}})],1),n("van-action-sheet",{attrs:{actions:e.actions},on:{select:e.onSelect},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}}),n("van-popup",{staticClass:"action",attrs:{position:"bottom"},model:{value:e.isShowAction,callback:function(t){e.isShowAction=t},expression:"isShowAction"}},[n("button",{on:{click:e.postData}},[e._v("保存")]),n("button",[e._v("工作流提交")]),n("button",{on:{click:e.closeAction}},[e._v("取消")])])],1)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell_title"},[n("span",[e._v("施工作业部门")])])}],s=(n("ac1f"),n("1276"),n("2f62")),o=n("e706"),r={name:"linshi",mixins:[o["a"]],data:function(){return{storeModule:"linshi",sendData:{workContent:"",workLocation:"",powerType:"",jworkVoltage:"",publicArea:"",devicePower:"",hazardIdentification:[],powertimeStart:"",powertimeEnd:"",connectRen:[],workCharger:[],workRen:[],licenseCode:""},powerTypeColumns:["插座","接线"],jworkVoltageColumns:["220V","380V"],publicAreaColumns:["是","否"],list_1:["火灾","爆炸","中毒","窒息","烫伤","灼伤","高处坠落","触电"],showPicker:!1,actions:[{name:"保存",index:0},{name:"工作流提交",index:1},{name:"取消",index:2}],isShowAction:!1}},computed:Object(s["b"])({hazardIdentification:function(e){return e.linshi.hazardIdentification},connectRen:function(e){return e.linshi.connectRen},workCharger:function(e){return e.linshi.workCharger},workRen:function(e){return e.linshi.workRen}}),created:function(){this.id=this.$route.query.id||"",this.status=this.$route.query.status||0,console.log("this.id: ",this.id),this.id&&this.getData()},beforeDestroy:function(){this.$store.dispatch("linshi/cleanState"),this.$destroy("LinShi")},methods:{getData:function(){var e=this;console.log("获取工作票内容");var t={};t.id=this.id,t.__sid=this.$userInfo.sessionId,this.$api.page_3.htHseLsydzypListData(t).then((function(t){console.log("res: ",t),e.sendData.workContent=t.list[0].workContent,e.sendData.workLocation=t.list[0].workLocation,e.sendData.powerType=t.list[0].powerType,e.sendData.jworkVoltage=t.list[0].jworkVoltage,e.sendData.hazardIdentification=t.list[0].hazardIdentification.split(","),e.sendData.powertimeStart=t.list[0].powertimeStart,e.sendData.powertimeEnd=t.list[0].powertimeEnd,e.sendData.connectRen=t.list[0].connectRen.split(","),e.sendData.workCharger=t.list[0].workCharger.split(","),e.sendData.workRen=t.list[0].workRen.split(","),e.sendData.licenseCode=t.list[0].licenseCode})).catch((function(){}))},postData:function(){var e=this,t=this,n=JSON.parse(JSON.stringify(this.sendData));n.hazardIdentification=this.stringData("hazardIdentification","list_1"),n.connectRen=this.userString(n.connectRen,"userName"),n.workCharger=this.userString(n.workCharger,"userName"),n.workRen=this.userString(n.workRen,"userName"),n.apprDept=this.$userInfo.officeName,n.apprRen=this.$userInfo.userName,n.__sid=this.$userInfo.sessionId,this.$api.page_3.htHseLsydzypSave(n).then((function(n){console.log("res: ",n),e.$Toast.success({message:"提交成功",onClose:function(){t.pageBack()}})})).catch((function(){}))},onSelect:function(e){this.showPicker=!1,0===e.index&&this.Next()},openAction:function(){this.isShowAction=!0},closeAction:function(){this.isShowAction=!1}},watch:{hazardIdentification:function(e){this.sendData.hazardIdentification=e},connectRen:function(e){this.sendData.connectRen=e},workCharger:function(e){this.sendData.workCharger=e},workRen:function(e){this.sendData.workRen=e}}},l=r,c=(n("1ad8"),n("2877")),u=Object(c["a"])(l,a,i,!1,null,"2cd9395c",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-108a9ab7.2cbd3911.js.map