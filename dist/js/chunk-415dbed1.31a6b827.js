(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-415dbed1"],{"2a9e":function(e,t,a){"use strict";var i=a("5ef2"),n=a.n(i);n.a},"2fa7":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var i=a("85d3"),n=a.n(i);function c(e,t,a){return t in e?n()(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},"35ee":function(e,t,a){"use strict";var i=a("45a8"),n=a.n(i);n.a},"3e476":function(e,t,a){var i=a("a5eb"),n=a("c1b2"),c=a("4180");i({target:"Object",stat:!0,forced:!n,sham:!n},{defineProperty:c.f})},"45a8":function(e,t,a){},"5ef2":function(e,t,a){},"85d3":function(e,t,a){e.exports=a("9a13")},"8b5e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mangban"},[a("van-nav-bar",{attrs:{title:"盲板抽堵安全","left-text":"返回","right-text":"操作","left-arrow":""},on:{"click-left":e.pageBack,"click-right":e.openAction}}),a("div",{staticClass:"header-cell"},[a("cell-value",{staticClass:"readonly",attrs:{title:"申请部门",required:"",value:e.sendData.applyDept}}),a("cell-value",{staticClass:"readonly",attrs:{title:"申请人",required:"",value:e.sendData.applyer}}),a("cell-value",{staticClass:"readonly",attrs:{title:"作业票编号",value:""}}),a("cell-value",{staticClass:"readonly",attrs:{title:"作业票状态",value:"编辑"}})],1),e._l(e.sendData.pipe,(function(t,i){return a("div",{key:i,staticClass:"cell_group"},[a("cell-value",{staticClass:"guandao-id",attrs:{title:"管道"+(i+1)}}),a("div",{staticClass:"cell"},[e._m(0,!0),a("div",{staticClass:"cell_input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pipeName,expression:"item.pipeName"}],attrs:{type:"text",placeholder:"手工录入"},domProps:{value:t.pipeName},on:{input:function(a){a.target.composing||e.$set(t,"pipeName",a.target.value)}}})])]),a("div",{staticClass:"cell"},[e._m(1,!0),a("div",{staticClass:"cell_input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pipeMedium,expression:"item.pipeMedium"}],attrs:{type:"text",placeholder:"手工录入"},domProps:{value:t.pipeMedium},on:{input:function(a){a.target.composing||e.$set(t,"pipeMedium",a.target.value)}}})])]),a("div",{staticClass:"cell"},[e._m(2,!0),a("div",{staticClass:"cell_input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pipeTemp,expression:"item.pipeTemp"}],attrs:{type:"text",placeholder:"手工录入"},domProps:{value:t.pipeTemp},on:{input:function(a){a.target.composing||e.$set(t,"pipeTemp",a.target.value)}}})])]),a("div",{staticClass:"cell"},[e._m(3,!0),a("div",{staticClass:"cell_input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pipePressure,expression:"item.pipePressure"}],attrs:{type:"text",placeholder:"手工录入"},domProps:{value:t.pipePressure},on:{input:function(a){a.target.composing||e.$set(t,"pipePressure",a.target.value)}}})])]),a("cell-picker",{attrs:{title:"材质",columns:e.materialColumns},model:{value:e.sendData.pipe[i].pipeMaterial,callback:function(t){e.$set(e.sendData.pipe[i],"pipeMaterial",t)},expression:"sendData.pipe[index].pipeMaterial"}}),a("div",{staticClass:"cell"},[e._m(4,!0),a("div",{staticClass:"cell_input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pipeSpec,expression:"item.pipeSpec"}],attrs:{type:"text",placeholder:"手工录入"},domProps:{value:t.pipeSpec},on:{input:function(a){a.target.composing||e.$set(t,"pipeSpec",a.target.value)}}})])]),a("div",{staticClass:"cell"},[e._m(5,!0),a("div",{staticClass:"cell_input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pipeNumber,expression:"item.pipeNumber"}],attrs:{type:"text",placeholder:"手工录入"},domProps:{value:t.pipeNumber},on:{input:function(a){a.target.composing||e.$set(t,"pipeNumber",a.target.value)}}})])]),a("cell-time",{attrs:{title:"堵时间"},model:{value:t.pipePullTime,callback:function(a){e.$set(t,"pipePullTime",a)},expression:"item.pipePullTime"}}),a("cell-time",{attrs:{title:"抽时间"},model:{value:t.pipeBlockTime,callback:function(a){e.$set(t,"pipeBlockTime",a)},expression:"item.pipeBlockTime"}}),a("cell-select-user",{attrs:{title:"堵作业人",storeModule:e.storeModule,storeKey:"pipeBlockOperator"+i},model:{value:e.sendData.pipe[i].pipeBlockOperator,callback:function(t){e.$set(e.sendData.pipe[i],"pipeBlockOperator",t)},expression:"sendData.pipe[index].pipeBlockOperator"}}),a("cell-select-user",{attrs:{title:"抽作业人",storeModule:e.storeModule,storeKey:"pipePullOperator"+i},model:{value:e.sendData.pipe[i].pipePullOperator,callback:function(t){e.$set(e.sendData.pipe[i],"pipePullOperator",t)},expression:"sendData.pipe[index].pipePullOperator"}}),a("cell-select-user",{attrs:{title:"堵监护人",storeModule:e.storeModule,storeKey:"pipeBlockGuardian"+i},model:{value:e.sendData.pipe[i].pipeBlockGuardian,callback:function(t){e.$set(e.sendData.pipe[i],"pipeBlockGuardian",t)},expression:"sendData.pipe[index].pipeBlockGuardian"}}),a("cell-select-user",{attrs:{title:"抽监护人",storeModule:e.storeModule,storeKey:"pipePullGuardian"+i},model:{value:e.sendData.pipe[i].pipePullGuardian,callback:function(t){e.$set(e.sendData.pipe[i],"pipePullGuardian",t)},expression:"sendData.pipe[index].pipePullGuardian"}}),i==e.sendData.pipe.length-1?a("div",{staticClass:"add_device"},[a("div",{staticClass:"add_device_action",on:{click:e.addDevice}},[a("van-icon",{attrs:{name:"add-o",color:"#6096F8"}})],1)]):e._e()],1)})),a("div",{staticClass:"cell_group"},[a("cell-select-user",{attrs:{title:"生产部门作业负责人",required:"",storeModule:e.storeModule,storeKey:"scMan"},model:{value:e.sendData.scMan,callback:function(t){e.$set(e.sendData,"scMan",t)},expression:"sendData.scMan"}}),a("cell-select-user",{attrs:{title:"作业部门负责人",required:"",storeModule:e.storeModule,storeKey:"zyMan"},model:{value:e.sendData.zyMan,callback:function(t){e.$set(e.sendData,"zyMan",t)},expression:"sendData.zyMan"}}),a("cell-select-tag",{attrs:{required:"",title:"涉及其他特殊作业",storeKey:"otherSpecial",tagList:e.otherSpecial,showList:e.list_1,storeModule:e.storeModule}})],1),a("van-popup",{attrs:{position:"bottom"},model:{value:e.timeShow,callback:function(t){e.timeShow=t},expression:"timeShow"}},[a("van-datetime-picker",{attrs:{type:"datetime","min-date":new Date},on:{cancel:e.onTimeCancel,confirm:e.onTimeConfirm},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1),a("div",{staticClass:"confirm"},[e._m(6),a("div",{staticClass:"confirm_list"},[a("Signature",{attrs:{checked:!!e.checked[0]&&e.checked[0].checked,img:e.checked[0]?e.checked[0].img:""},on:{checked:function(t){return e.showSignature(0)},cancel:function(t){return e.signatureCancel(0)}}},[a("span",{attrs:{slot:""},slot:"default"},[e._v("在有毒介质的管道、设备上作业时,尽可能降低系统压力,作业点应为常压")])]),a("Signature",{attrs:{checked:!!e.checked[1]&&e.checked[1].checked,img:e.checked[1]?e.checked[1].img:""},on:{checked:function(t){return e.showSignature(1)},cancel:function(t){return e.signatureCancel(1)}}},[a("span",{attrs:{slot:""},slot:"default"},[e._v("在有毒介质的管道、设备上作业时,作业人员穿戴适合的防护用具")])]),a("Signature",{attrs:{checked:!!e.checked[2]&&e.checked[2].checked,img:e.checked[2]?e.checked[2].img:""},on:{checked:function(t){return e.showSignature(2)},cancel:function(t){return e.signatureCancel(2)}}},[a("div",{attrs:{slot:""},slot:"default"},[e._v("易燃易爆场所,作业人员穿防静电工作服、工作鞋;作业时使用防爆灯具和防爆工具")])]),a("Signature",{attrs:{checked:!!e.checked[3]&&e.checked[3].checked,img:e.checked[3]?e.checked[3].img:""},on:{checked:function(t){return e.showSignature(3)},cancel:function(t){return e.signatureCancel(3)}}},[a("div",{attrs:{slot:""},slot:"default"},[e._v("易燃易爆场所,距作业地点30m 内无其他动火作业")])]),a("Signature",{attrs:{checked:!!e.checked[4]&&e.checked[4].checked,img:e.checked[4]?e.checked[4].img:""},on:{checked:function(t){return e.showSignature(4)},cancel:function(t){return e.signatureCancel(4)}}},[a("div",{attrs:{slot:""},slot:"default"},[e._v("在强腐蚀性介质的管道、设备上作业时,作业人员已采取防止酸碱灼伤的措施")])]),a("Signature",{attrs:{checked:!!e.checked[5]&&e.checked[5].checked,img:e.checked[5]?e.checked[5].img:""},on:{checked:function(t){return e.showSignature(5)},cancel:function(t){return e.signatureCancel(5)}}},[a("div",{attrs:{slot:""},slot:"default"},[e._v("介质温度较高、可能造成烫伤的情况下,作业人员已采取防烫措施")])]),a("Signature",{attrs:{checked:!!e.checked[6]&&e.checked[6].checked,img:e.checked[6]?e.checked[6].img:""},on:{checked:function(t){return e.showSignature(6)},cancel:function(t){return e.signatureCancel(6)}}},[a("div",{attrs:{slot:""},slot:"default"},[e._v("同一管道上不同时进行两处及两处以上的盲板抽堵作业")])])],1),a("van-popup",{staticClass:"popup",attrs:{"close-on-click-overlay":!1,position:"bottom"},model:{value:e.signatureShow,callback:function(t){e.signatureShow=t},expression:"signatureShow"}},[a("Canvas",{ref:"signature",on:{save:e.saveCanvas,cancel:e.cancelCanvas}})],1)],1),a("van-popup",{staticClass:"action",attrs:{position:"bottom"},model:{value:e.isShowAction,callback:function(t){e.isShowAction=t},expression:"isShowAction"}},[a("button",{on:{click:e.postData}},[e._v("保存")]),a("button",[e._v("工作流提交")]),a("button",{on:{click:e.closeAction}},[e._v("取消")])])],2)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cell_title"},[a("span",[e._v("设备管道名称")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cell_title"},[a("span",[e._v("介质")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cell_title"},[a("span",[e._v("温度")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cell_title"},[a("span",[e._v("压力")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cell_title"},[a("span",[e._v("规格")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cell_title"},[a("span",[e._v("编号")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"head"},[a("div",{staticClass:"head_1"},[e._v("安全措施")]),a("div",{staticClass:"head_2"},[e._v("确认")]),a("div",{staticClass:"head_3"},[e._v("确认人")])])}],c=(a("99af"),a("0d03"),a("2fa7")),l=a("e706"),p=a("2f62"),s=a("9ce3"),r=a("f877"),o={name:"mangban",data:function(){var e;return e={infoId:0,storeModule:"mangban",materialShowShow:!1,material:{index:0,value:""},materialColumns:["碳钢","不锈钢","塑料","聚四氟乙烯"],timeShow:!1,currentDate:new Date,list_1:["登高","动火","临时用电","盲板抽堵","吊装","动土","断路作业"],checked:[],isShowAction:!1,sendData:{applyDept:this.$userInfo.officeName,applyer:this.$userInfo.userName,scMan:"",zyMan:"",otherSpecial:[],checkedArr:[],signatureImage:"",pipe:[{pipeName:"名称",pipeMedium:"介质",pipeTemp:"温度",pipePressure:"压力",pipeMaterial:"材质",pipeSpec:"规格",pipeNumber:"编号",pipePullTime:"",pipeBlockTime:"",pipeBlockOperator:"",pipePullOperator:"",pipeBlockGuardian:"",pipePullGuardian:""}],__sid:localStorage.getItem("JiaHuaSessionId")}},Object(c["a"])(e,"checked",[{checked:!1,image:""}]),Object(c["a"])(e,"signatureShow",!1),e},computed:Object(p["b"])({scMan:function(e){return e.mangban.scMan},zyMan:function(e){return e.mangban.zyMan},otherSpecial:function(e){return e.mangban.otherSpecial},pipeBlockOperator1:function(e){return e.mangban.pipeBlockOperator0},pipePullOperator1:function(e){return e.mangban.pipePullOperator0},pipeBlockGuardian1:function(e){return e.mangban.pipeBlockGuardian0},pipePullGuardian1:function(e){return e.mangban.pipePullGuardian0},pipeBlockOperator2:function(e){return e.mangban.pipeBlockOperator1},pipePullOperator2:function(e){return e.mangban.pipePullOperator1},pipeBlockGuardian2:function(e){return e.mangban.pipeBlockGuardian1},pipePullGuardian2:function(e){return e.mangban.pipePullGuardian1},pipeBlockOperator3:function(e){return e.mangban.pipeBlockOperator2},pipePullOperator3:function(e){return e.mangban.pipePullOperator2},pipeBlockGuardian3:function(e){return e.mangban.pipeBlockGuardian2},pipePullGuardian3:function(e){return e.mangban.pipePullGuardian2},pipeBlockOperator4:function(e){return e.mangban.pipeBlockOperator3},pipePullOperator4:function(e){return e.mangban.pipePullOperator3},pipeBlockGuardian4:function(e){return e.mangban.pipeBlockGuardian3},pipePullGuardian4:function(e){return e.mangban.pipePullGuardian3}}),components:{Canvas:s["a"],Signature:r["a"]},mixins:[l["a"]],created:function(){this.infoId=this.$route.query.id||0,this.getInfo()},methods:{getInfo:function(){var e=this;this.$api.page_3.htHseMbzypListData({__sid:localStorage.getItem("JiaHuaSessionId"),id:this.infoId}).then((function(t){e.listData=t.list,e.isLoading=!1,console.log(e.listData)})).catch((function(){}))},saveCanvas:function(e){this.signatureShow=!1,this.checked[this.selectSignatureShow]={checked:!1,img:""},this.checked[this.selectSignatureShow].img=e,this.sendData.signatureImage=e,console.log("signatureShow: ")},cancelCanvas:function(){this.checked[this.selectSignatureShow].checked=!1,this.checked[this.selectSignatureShow].img="",this.signatureShow=!1},showSignature:function(e){console.log("index: ",e),console.log("显示签名"),this.selectSignatureShow=e,this.signatureShow=!0,this.checkedArr.push(e)},signatureCancel:function(e){console.log("index: ",e),console.log("取消"),this.checked[e].checked=!1,this.checked[e].img=""},openAction:function(){this.isShowAction=!0},closeAction:function(){this.isShowAction=!1},pageBack:function(){this.$router.back()},onMaterialConfirm:function(e,t){this.materialShowShow=!1,this.material={index:t,value:e}},postData:function(){var e=JSON.parse(JSON.stringify(this.sendData)),t=e.pipe,a=[];function i(e){return"碳钢"==e?1:"不锈钢"==e?2:"塑料"==e?3:"聚四氟乙烯"==e?4:void 0}for(var n=0;n<=3;n++)console.log(n),void 0!=t[n]?(console.log(888),console.log(t[n].pipeMaterial),a[n]="".concat(t[n].pipeName,"|").concat(t[n].pipeMedium,"|").concat(t[n].pipePressure,"|").concat(i(t[n].pipeMaterial),"|").concat(t[n].pipeSpec,"|").concat(t[n].pipeNumber,"|").concat(t[n].pipeBlockTime,"|").concat(t[n].pipePullTime,"|").concat(t[n].pipeBlockOperator[0].userName,"|").concat(t[n].pipePullOperator[0].userName,"|").concat(t[n].pipeBlockGuardian[0].userName,"|").concat(t[n].pipePullGuardian[0].userName)):a[n]="|||||||||||&|&";var c={applyDept:e.applyDept,applyer:e.applyer,scMan:e.scMan,zyMan:e.zyMan,otherSpecial:e.otherSpecial,onePipe:a[0],twoPipe:a[1],threePipe:a[2],fourPipe:a[3],num:String(e.checkedArr),affirmRen:e.signatureImage,__sid:e.__sid};console.log(c),this.$api.page_3.htHseMbzypSave(c).then((function(e){console.log(e)}))},onMaterialCancel:function(){this.materialShowShow=!1},onTimeCancel:function(){this.timeShow=!1},onTimeConfirm:function(){this.timeShow=!1},toSelect:function(e){this.$router.push({path:"./select",query:{index:e,showList:this["list_".concat(e)]}})},addDevice:function(){this.sendData.pipe.length<4&&this.sendData.pipe.push({pipeName:"",pipeMedium:"",pipeTemp:"",pipePressure:"",pipeMaterial:"",pipeSpec:"",pipeNumber:"",pipePullTime:"",pipeBlockTime:"",pipeBlockOperator:"",pipePullOperator:"",pipeBlockGuardian:"",pipePullGuardian:""})}},watch:{zyMan:function(e){this.sendData.zyMan=e},scMan:function(e){this.sendData.scMan=e},otherSpecial:function(e){this.sendData.otherSpecial=e},pipeBlockOperator1:function(e){this.sendData.pipe[0].pipeBlockOperator=e},pipePullOperator1:function(e){this.sendData.pipe[0].pipePullOperator=e},pipeBlockGuardian1:function(e){this.sendData.pipe[0].pipeBlockGuardian=e},pipePullGuardian1:function(e){this.sendData.pipe[0].pipePullGuardian=e},pipeBlockOperator2:function(e){this.sendData.pipe[1].pipeBlockOperator=e},pipePullOperator2:function(e){this.sendData.pipe[1].pipePullOperator=e},pipeBlockGuardian2:function(e){this.sendData.pipe[1].pipeBlockGuardian=e},pipePullGuardian2:function(e){this.sendData.pipe[1].pipePullGuardian=e},pipeBlockOperator3:function(e){this.sendData.pipe[2].pipeBlockOperator=e},pipePullOperator3:function(e){this.sendData.pipe[2].pipePullOperator=e},pipeBlockGuardian3:function(e){this.sendData.pipe[2].pipeBlockGuardian=e},pipePullGuardian3:function(e){this.sendData.pipe[2].pipePullGuardian=e},pipeBlockOperator4:function(e){this.sendData.pipe[3].pipeBlockOperator=e},pipePullOperator4:function(e){this.sendData.pipe[3].pipePullOperator=e},pipeBlockGuardian4:function(e){this.sendData.pipe[3].pipeBlockGuardian=e},pipePullGuardian4:function(e){this.sendData.pipe[3].pipePullGuardian=e}}},u=o,d=(a("2a9e"),a("2877")),h=Object(d["a"])(u,i,n,!1,null,"8be4a4a4",null);t["default"]=h.exports},"9a13":function(e,t,a){e.exports=a("a38c")},a38c:function(e,t,a){a("3e476");var i=a("764b"),n=i.Object,c=e.exports=function(e,t,a){return n.defineProperty(e,t,a)};n.defineProperty.sham&&(c.sham=!0)},f877:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"confirm_item BGblue"},[a("div",{staticClass:"confirm_item_content"},[e._t("default")],2),a("div",{staticClass:"confirm_item_check success"},[a("van-checkbox",{attrs:{"checked-color":"#07c160"},on:{click:function(t){return e.showSignature(0)}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1),e.img?a("div",{staticClass:"confirm_item_signature"},[a("van-image",{attrs:{width:"100%",height:"100%",fit:"scale-down",src:e.img}})],1):e._e()])},n=[],c={name:"signature",data:function(){return{checked:!1}},props:{img:{type:String,default:""},disable:{type:Boolean,default:!1}},watch:{checked:function(e){this.disable||(e?this.changeChecked(e):this.cancel())}},methods:{showSignature:function(){},changeChecked:function(){this.$emit("checked")},cancel:function(){this.$emit("cancel")}}},l=c,p=(a("35ee"),a("2877")),s=Object(p["a"])(l,i,n,!1,null,"78a3b504",null);t["a"]=s.exports}}]);
//# sourceMappingURL=chunk-415dbed1.31a6b827.js.map