(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ce7439a"],{"07cb":function(e,t,n){},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"2b19":function(e,t,n){var i=n("23e7"),a=n("129f");i({target:"Object",stat:!0},{is:a})},"35ee":function(e,t,n){"use strict";var i=n("45a8"),a=n.n(i);a.a},"45a8":function(e,t,n){},"69a0":function(e,t,n){(function(t){e.exports=t()})((function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],i=e[1],a=e[2],s=e[3];n+=(i&a|~i&s)+t[0]-680876936|0,n=(n<<7|n>>>25)+i|0,s+=(n&i|~n&a)+t[1]-389564586|0,s=(s<<12|s>>>20)+n|0,a+=(s&n|~s&i)+t[2]+606105819|0,a=(a<<17|a>>>15)+s|0,i+=(a&s|~a&n)+t[3]-1044525330|0,i=(i<<22|i>>>10)+a|0,n+=(i&a|~i&s)+t[4]-176418897|0,n=(n<<7|n>>>25)+i|0,s+=(n&i|~n&a)+t[5]+1200080426|0,s=(s<<12|s>>>20)+n|0,a+=(s&n|~s&i)+t[6]-1473231341|0,a=(a<<17|a>>>15)+s|0,i+=(a&s|~a&n)+t[7]-45705983|0,i=(i<<22|i>>>10)+a|0,n+=(i&a|~i&s)+t[8]+1770035416|0,n=(n<<7|n>>>25)+i|0,s+=(n&i|~n&a)+t[9]-1958414417|0,s=(s<<12|s>>>20)+n|0,a+=(s&n|~s&i)+t[10]-42063|0,a=(a<<17|a>>>15)+s|0,i+=(a&s|~a&n)+t[11]-1990404162|0,i=(i<<22|i>>>10)+a|0,n+=(i&a|~i&s)+t[12]+1804603682|0,n=(n<<7|n>>>25)+i|0,s+=(n&i|~n&a)+t[13]-40341101|0,s=(s<<12|s>>>20)+n|0,a+=(s&n|~s&i)+t[14]-1502002290|0,a=(a<<17|a>>>15)+s|0,i+=(a&s|~a&n)+t[15]+1236535329|0,i=(i<<22|i>>>10)+a|0,n+=(i&s|a&~s)+t[1]-165796510|0,n=(n<<5|n>>>27)+i|0,s+=(n&a|i&~a)+t[6]-1069501632|0,s=(s<<9|s>>>23)+n|0,a+=(s&i|n&~i)+t[11]+643717713|0,a=(a<<14|a>>>18)+s|0,i+=(a&n|s&~n)+t[0]-373897302|0,i=(i<<20|i>>>12)+a|0,n+=(i&s|a&~s)+t[5]-701558691|0,n=(n<<5|n>>>27)+i|0,s+=(n&a|i&~a)+t[10]+38016083|0,s=(s<<9|s>>>23)+n|0,a+=(s&i|n&~i)+t[15]-660478335|0,a=(a<<14|a>>>18)+s|0,i+=(a&n|s&~n)+t[4]-405537848|0,i=(i<<20|i>>>12)+a|0,n+=(i&s|a&~s)+t[9]+568446438|0,n=(n<<5|n>>>27)+i|0,s+=(n&a|i&~a)+t[14]-1019803690|0,s=(s<<9|s>>>23)+n|0,a+=(s&i|n&~i)+t[3]-187363961|0,a=(a<<14|a>>>18)+s|0,i+=(a&n|s&~n)+t[8]+1163531501|0,i=(i<<20|i>>>12)+a|0,n+=(i&s|a&~s)+t[13]-1444681467|0,n=(n<<5|n>>>27)+i|0,s+=(n&a|i&~a)+t[2]-51403784|0,s=(s<<9|s>>>23)+n|0,a+=(s&i|n&~i)+t[7]+1735328473|0,a=(a<<14|a>>>18)+s|0,i+=(a&n|s&~n)+t[12]-1926607734|0,i=(i<<20|i>>>12)+a|0,n+=(i^a^s)+t[5]-378558|0,n=(n<<4|n>>>28)+i|0,s+=(n^i^a)+t[8]-2022574463|0,s=(s<<11|s>>>21)+n|0,a+=(s^n^i)+t[11]+1839030562|0,a=(a<<16|a>>>16)+s|0,i+=(a^s^n)+t[14]-35309556|0,i=(i<<23|i>>>9)+a|0,n+=(i^a^s)+t[1]-1530992060|0,n=(n<<4|n>>>28)+i|0,s+=(n^i^a)+t[4]+1272893353|0,s=(s<<11|s>>>21)+n|0,a+=(s^n^i)+t[7]-155497632|0,a=(a<<16|a>>>16)+s|0,i+=(a^s^n)+t[10]-1094730640|0,i=(i<<23|i>>>9)+a|0,n+=(i^a^s)+t[13]+681279174|0,n=(n<<4|n>>>28)+i|0,s+=(n^i^a)+t[0]-358537222|0,s=(s<<11|s>>>21)+n|0,a+=(s^n^i)+t[3]-722521979|0,a=(a<<16|a>>>16)+s|0,i+=(a^s^n)+t[6]+76029189|0,i=(i<<23|i>>>9)+a|0,n+=(i^a^s)+t[9]-640364487|0,n=(n<<4|n>>>28)+i|0,s+=(n^i^a)+t[12]-421815835|0,s=(s<<11|s>>>21)+n|0,a+=(s^n^i)+t[15]+530742520|0,a=(a<<16|a>>>16)+s|0,i+=(a^s^n)+t[2]-995338651|0,i=(i<<23|i>>>9)+a|0,n+=(a^(i|~s))+t[0]-198630844|0,n=(n<<6|n>>>26)+i|0,s+=(i^(n|~a))+t[7]+1126891415|0,s=(s<<10|s>>>22)+n|0,a+=(n^(s|~i))+t[14]-1416354905|0,a=(a<<15|a>>>17)+s|0,i+=(s^(a|~n))+t[5]-57434055|0,i=(i<<21|i>>>11)+a|0,n+=(a^(i|~s))+t[12]+1700485571|0,n=(n<<6|n>>>26)+i|0,s+=(i^(n|~a))+t[3]-1894986606|0,s=(s<<10|s>>>22)+n|0,a+=(n^(s|~i))+t[10]-1051523|0,a=(a<<15|a>>>17)+s|0,i+=(s^(a|~n))+t[1]-2054922799|0,i=(i<<21|i>>>11)+a|0,n+=(a^(i|~s))+t[8]+1873313359|0,n=(n<<6|n>>>26)+i|0,s+=(i^(n|~a))+t[15]-30611744|0,s=(s<<10|s>>>22)+n|0,a+=(n^(s|~i))+t[6]-1560198380|0,a=(a<<15|a>>>17)+s|0,i+=(s^(a|~n))+t[13]+1309151649|0,i=(i<<21|i>>>11)+a|0,n+=(a^(i|~s))+t[4]-145523070|0,n=(n<<6|n>>>26)+i|0,s+=(i^(n|~a))+t[11]-1120210379|0,s=(s<<10|s>>>22)+n|0,a+=(n^(s|~i))+t[2]+718787259|0,a=(a<<15|a>>>17)+s|0,i+=(s^(a|~n))+t[9]-343485551|0,i=(i<<21|i>>>11)+a|0,e[0]=n+e[0]|0,e[1]=i+e[1]|0,e[2]=a+e[2]|0,e[3]=s+e[3]|0}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function a(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function s(e){var t,a,s,r,o,c,l=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=l;t+=64)n(u,i(e.substring(t-64,t)));for(e=e.substring(t-64),a=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<a;t+=1)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(n(u,s),t=0;t<16;t+=1)s[t]=0;return r=8*l,r=r.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),c=parseInt(r[1],16)||0,s[14]=o,s[15]=c,n(u,s),u}function r(e){var t,i,s,r,o,c,l=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=l;t+=64)n(u,a(e.subarray(t-64,t)));for(e=t-64<l?e.subarray(t-64):new Uint8Array(0),i=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)s[t>>2]|=e[t]<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(n(u,s),t=0;t<16;t+=1)s[t]=0;return r=8*l,r=r.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),c=parseInt(r[1],16)||0,s[14]=o,s[15]=c,n(u,s),u}function o(e){var n,i="";for(n=0;n<4;n+=1)i+=t[e>>8*n+4&15]+t[e>>8*n&15];return i}function c(e){var t;for(t=0;t<e.length;t+=1)e[t]=o(e[t]);return e.join("")}function l(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e,t){var n,i=e.length,a=new ArrayBuffer(i),s=new Uint8Array(a);for(n=0;n<i;n+=1)s[n]=e.charCodeAt(n);return t?s:a}function h(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function f(e,t,n){var i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e)),i.set(new Uint8Array(t),e.byteLength),n?i:i.buffer}function d(e){var t,n=[],i=e.length;for(t=0;t<i-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function p(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==c(s("hello"))&&function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n},"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return e=0|e||0,e<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,i){var a,s,r,o,c=this.byteLength,l=t(n,c),u=c;return i!==e&&(u=t(i,c)),l>u?new ArrayBuffer(0):(a=u-l,s=new ArrayBuffer(a),r=new Uint8Array(s),o=new Uint8Array(this,l,a),r.set(o),s)}}(),p.prototype.append=function(e){return this.appendBinary(l(e)),this},p.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,a=this._buff.length;for(t=64;t<=a;t+=64)n(this._hash,i(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},p.prototype.end=function(e){var t,n,i=this._buff,a=i.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<a;t+=1)s[t>>2]|=i.charCodeAt(t)<<(t%4<<3);return this._finish(s,a),n=c(this._hash),e&&(n=d(n)),this.reset(),n},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},p.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(e,t){var i,a,s,r=t;if(e[r>>2]|=128<<(r%4<<3),r>55)for(n(this._hash,e),r=0;r<16;r+=1)e[r]=0;i=8*this._length,i=i.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(i[2],16),s=parseInt(i[1],16)||0,e[14]=a,e[15]=s,n(this._hash,e)},p.hash=function(e,t){return p.hashBinary(l(e),t)},p.hashBinary=function(e,t){var n=s(e),i=c(n);return t?d(i):i},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(e){var t,i=f(this._buff.buffer,e,!0),s=i.length;for(this._length+=e.byteLength,t=64;t<=s;t+=64)n(this._hash,a(i.subarray(t-64,t)));return this._buff=t-64<s?new Uint8Array(i.buffer.slice(t-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(e){var t,n,i=this._buff,a=i.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<a;t+=1)s[t>>2]|=i[t]<<(t%4<<3);return this._finish(s,a),n=c(this._hash),e&&(n=d(n)),this.reset(),n},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var e=p.prototype.getState.call(this);return e.buff=h(e.buff),e},p.ArrayBuffer.prototype.setState=function(e){return e.buff=u(e.buff,!0),p.prototype.setState.call(this,e)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(e,t){var n=r(new Uint8Array(e)),i=c(n);return t?d(i):i},p}))},bb60:function(e,t,n){"use strict";var i=n("07cb"),a=n.n(i);a.a},e1f3:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("4de4"),n("fb6a"),n("b0c0"),n("2b19");var i=n("69a0"),a=n.n(i),s={data:function(){return{fileList:[]}},methods:{beforeRead:function(e){var t=/^image\/(jpeg|jpg|png)/;if(!t.test(e.type))return alert("图片类型必须是jpeg,jpg,png中的一种"),!1;var n=new FormData;n.append("uploadType","image"),this.uploadFile(n,e)},getFileMD5:function(e,t){var n=new FileReader,i=10485760,s=(Math.ceil(e.size/i),0),r=new a.a;function o(){var t=s*i,a=t+i>=e.size?e.size:t+i;n.readAsBinaryString(e.slice(t,a))}n.onload=function(e){r.appendBinary(e.target.result),s++,t(r.end())},o()},uploadFile:function(e,t){var n=this;e.append("file",t),e.append("fileName",t.name),e.append("__sid",this.$userInfo.sessionId),this.getFileMD5(t,(function(t){e.append("fileMd5",t),n.$api.common.uploadFile(e).then((function(e){"true"===e.result?(n.$Toast.success({message:"上传成功"}),n.uploadFileSuccess(e)):n.$Toast.fail({message:"上传失败"})})).catch((function(){n.$Toast.fail({message:"上传失败"})}))}))},uploadFileSuccess:function(e){var t=this.$imageUrl+e.fileUpload.fileUrl,n={index:this.fileList.length,id:e.fileUpload.id,url:t,fileUrl:e.fileUpload.fileUrl};this.fileList.push(n)},beforeDelete:function(e){var t=this.fileList.filter((function(t){return!Object.is(e,t)}));this.fileList=t}}}},f877:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"confirm_item BGblue"},[n("div",{staticClass:"confirm_item_content"},[e._t("default")],2),n("div",{staticClass:"confirm_item_check success"},[n("van-checkbox",{attrs:{"checked-color":"#07c160"},on:{click:function(t){return e.showSignature(0)}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1),e.img?n("div",{staticClass:"confirm_item_signature"},[n("van-image",{attrs:{width:"100%",height:"100%",fit:"scale-down",src:e.img}})],1):e._e()])},a=[],s={name:"signature",data:function(){return{checked:!1}},props:{img:{type:String,default:""},disable:{type:Boolean,default:!1}},watch:{checked:function(e){this.disable||(e?this.changeChecked(e):this.cancel())}},methods:{showSignature:function(){},changeChecked:function(){this.$emit("checked")},cancel:function(){this.$emit("cancel")}}},r=s,o=(n("35ee"),n("2877")),c=Object(o["a"])(r,i,a,!1,null,"78a3b504",null);t["a"]=c.exports},fb6a:function(e,t,n){"use strict";var i=n("23e7"),a=n("861d"),s=n("e8b5"),r=n("23cb"),o=n("50c4"),c=n("fc6a"),l=n("8418"),u=n("1dde"),h=n("b622"),f=h("species"),d=[].slice,p=Math.max;i({target:"Array",proto:!0,forced:!u("slice")},{slice:function(e,t){var n,i,u,h=c(this),g=o(h.length),v=r(e,g),m=r(void 0===t?g:t,g);if(s(h)&&(n=h.constructor,"function"!=typeof n||n!==Array&&!s(n.prototype)?a(n)&&(n=n[f],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return d.call(h,v,m);for(i=new(void 0===n?Array:n)(p(m-v,0)),u=0;v<m;v++,u++)v in h&&l(i,u,h[v]);return i.length=u,i}})},fe8f:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mangban"},[n("van-nav-bar",{attrs:{title:"断路安全","left-text":"返回","right-text":"操作","left-arrow":""},on:{"click-left":e.pageBack,"click-right":e.openAction}}),n("div",{staticClass:"cell_group"},[n("cell-value",{attrs:{title:"申请部门",value:e.$userInfo.officeName,disable:""}}),n("cell-value",{attrs:{title:"申请人",value:e.$userInfo.userName,disable:""}}),n("cell-value",{attrs:{title:"作业票编号",value:e.sendData.permitCode,disable:""}}),n("cell-value",{attrs:{title:"作业票状态",value:"编辑",disable:""}}),n("cell-select-tag",{attrs:{required:"",title:"断路原因",storeKey:"reason",tagList:e.reason,showList:e.list_1,storeModule:e.storeModule}}),n("cell-select-tag",{attrs:{required:"",title:"危害辨识",storeKey:"endangerSign",tagList:e.endangerSign,showList:e.list_2,storeModule:e.storeModule}}),n("cell-time",{attrs:{title:"断路开始时间",required:""},model:{value:e.sendData.offtimeStart,callback:function(t){e.$set(e.sendData,"offtimeStart",t)},expression:"sendData.offtimeStart"}}),n("cell-time",{attrs:{title:"断路结束时间",required:""},model:{value:e.sendData.powertimeEnd,callback:function(t){e.$set(e.sendData,"powertimeEnd",t)},expression:"sendData.powertimeEnd"}}),n("div",{staticClass:"cell"},[e._m(0),n("div",{staticClass:"cell_value"},[n("span",[e._v("部门名1、部门名2")]),n("span",{staticClass:"cell_value_arrow"},[n("van-icon",{attrs:{name:"search"}})],1)])]),n("cell-select-user",{attrs:{title:"作业部门负责人",required:"",storeModule:e.storeModule,storeKey:"workCharger"},model:{value:e.sendData.workCharger,callback:function(t){e.$set(e.sendData,"workCharger",t)},expression:"sendData.workCharger"}}),n("div",{staticClass:"cell"},[e._m(1),n("div",{staticClass:"cell_value"},[n("span",[e._v("人名1、人名2")]),n("span",{staticClass:"cell_value_arrow"},[n("van-icon",{attrs:{name:"search"}})],1)])]),n("cell-textarea",{attrs:{title:"断路地段示意图及相关说明",placeholder:"请输入工作内容"},model:{value:e.sendData.offExplain,callback:function(t){e.$set(e.sendData,"offExplain",t)},expression:"sendData.offExplain"}}),n("div",{staticClass:"cell border_none"},[n("div",{staticClass:"cell_other"},[n("div",{staticClass:"upload"},[n("div",{staticClass:"upload_icon"},[n("van-icon",{attrs:{name:"photo-o"}})],1),n("div",{staticClass:"upload_box"},[n("van-uploader",{attrs:{"before-read":e.beforeRead,"before-delete":e.beforeDelete,"preview-size":"5rem"},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1)])])])],1),n("div",{staticClass:"confirm"},[e._m(2),n("div",{staticClass:"confirm_list"},[n("Signature",{attrs:{checked:!!e.checked[0]&&e.checked[0].checked,img:e.checked[0]?e.checked[0].img:""},on:{checked:function(t){return e.showSignature(0)},cancel:function(t){return e.signatureCancel(0)}}},[n("div",{attrs:{slot:""},slot:"default"},[e._v("作业前,制定交通组织方案(附后),并已通知相关部门或单位")])]),n("Signature",{attrs:{checked:!!e.checked[1]&&e.checked[1].checked,img:e.checked[1]?e.checked[1].img:""},on:{checked:function(t){return e.showSignature(1)},cancel:function(t){return e.signatureCancel(1)}}},[n("div",{attrs:{slot:""},slot:"default"},[e._v("作业前,在断路的路口和相关道路上设置交通警示标志,在作业区附近设置路栏、道路作业警示灯、导向标等交通警示设施")])]),n("Signature",{attrs:{checked:!!e.checked[2]&&e.checked[2].checked,img:e.checked[2]?e.checked[2].img:""},on:{checked:function(t){return e.showSignature(2)},cancel:function(t){return e.signatureCancel(2)}}},[n("div",{attrs:{slot:""},slot:"default"},[e._v("夜间作业设置警示红灯，并设置固定的围栏")])])],1)]),n("van-popup",{staticClass:"popup",attrs:{"close-on-click-overlay":!1,position:"bottom"},model:{value:e.signatureShow,callback:function(t){e.signatureShow=t},expression:"signatureShow"}},[n("Canvas",{ref:"signature",on:{save:e.saveCanvas,cancel:e.cancelCanvas}})],1),n("van-popup",{staticClass:"action",attrs:{position:"bottom"},model:{value:e.isShowAction,callback:function(t){e.isShowAction=t},expression:"isShowAction"}},[n("button",{on:{click:e.postData}},[e._v("保存")]),n("button",[e._v("工作流提交")]),n("button",{on:{click:e.closeAction}},[e._v("取消")])])],1)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell_title"},[n("span",[e._v("作业部门")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell_title"},[n("span",[e._v("涉及部门")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"head"},[n("div",{staticClass:"head_1"},[e._v("安全措施")]),n("div",{staticClass:"head_2"},[e._v("确认")]),n("div",{staticClass:"head_3"},[e._v("确认人")])])}],s=(n("a15b"),n("d81d"),n("2f62")),r=n("e706"),o=n("e1f3"),c=n("9ce3"),l=n("f877"),u={name:"duanlu",mixins:[r["a"],o["a"]],components:{Signature:l["a"],Canvas:c["a"]},created:function(){this.id=this.$route.query.id||0,this.getInfo()},data:function(){return{id:0,storeModule:"duanlu",sendData:{reason:[],endangerSign:[],offtimeStart:"",powertimeEnd:"",workCharger:[],offExplain:""},fileList:[],list_1:["修理马路","开挖埋设水管","埋设电缆","开挖沟渠","吊装设备","管道"],list_2:["人员受伤","车辆伤害","人员跌落沟渠"],isShowAction:!1,signatureShow:!1,selectSignatureShow:0,checked:[{checked:!1,image:""},{checked:!1,image:""},{checked:!1,image:""}]}},computed:Object(s["b"])({reason:function(e){return e.duanlu.reason},endangerSign:function(e){return e.duanlu.endangerSign},workCharger:function(e){return e.duanlu.workCharger}}),beforeDestroy:function(){this.$store.dispatch("duanlu/cleanState")},methods:{getInfo:function(){var e=this;this.$api.page_3.htHseDlzypListData({__sid:localStorage.getItem("JiaHuaSessionId"),id:this.id}).then((function(t){e.listData=t.list,e.isLoading=!1,console.log(e.listData)})).catch((function(){}))},openAction:function(){this.isShowAction=!0},closeAction:function(){this.isShowAction=!1},postData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,i=this,a=JSON.parse(JSON.stringify(this.sendData)),s=this.fileList.map((function(e){return e.id}));a.reason=this.stringData("reason","list_1"),a.endangerSign=this.stringData("endangerSign","list_2"),a.applyDept=this.$userInfo.officeName,a.applyer=this.$userInfo.userName,a.offExplain=s.join(","),a.__sid=this.$userInfo.sessionId;var r=[{num:1,safetyCs:"作业前,制定交通组织方案(附后),并已通知相关部门或单位",affirmRen:this.checked[0]?this.checked[0].img:0,safetyStatus:this.checked[0]?1:0},{num:2,safetyCs:"作业前,在断路的路口和相关道路上设置交通警示标志,在作业区附近设置路栏、道路作业警示灯、导向标等交通警示设施",affirmRen:this.checked[1]?this.checked[1].img:0,safetyStatus:this.checked[1]?1:0},{num:3,safetyCs:"夜间作业设置警示红灯，并设置固定的围栏",affirmRen:this.checked[2]?this.checked[2].img:0,safetyStatus:this.checked[2]?1:0}];console.log(r),t&&(r.map((function(e){e.zypId=n})),a.htHseDlzypSaftyList=r),console.log("sendData: ",a),this.$api.page_3.htHseDlzypSave(a).then((function(n){console.log("res: ",n),t?e.$Toast.success({message:"提交成功",onClose:function(){i.pageBack()}}):e.postData(!0,n.message)})).catch((function(){}))},showSignature:function(e){console.log("index: ",e),console.log("显示签名"),this.selectSignatureShow=e,this.checked[e].checked=!0,this.signatureShow=!0},signatureCancel:function(e){console.log("index: ",e),console.log("取消"),this.checked[e].checked=!1,this.checked[e].img=""},saveCanvas:function(e){this.signatureShow=!1,this.checked[this.selectSignatureShow]={checked:!1,img:""},this.checked[this.selectSignatureShow].img=e},cancelCanvas:function(){console.log("取消签名"),console.log("this.selectSignatureShow: ",this.selectSignatureShow),this.checked[this.selectSignatureShow].checked=!1,this.checked[this.selectSignatureShow].img="",this.signatureShow=!1}},watch:{reason:function(e){this.sendData.reason=e},endangerSign:function(e){this.sendData.endangerSign=e},workCharger:function(e){this.sendData.workCharger=e}}},h=u,f=(n("bb60"),n("2877")),d=Object(f["a"])(h,i,a,!1,null,"4d18521a",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-0ce7439a.8171c452.js.map